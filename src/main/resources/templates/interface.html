<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>知域知网，了解一切，简单生活</title>
    <link rel="stylesheet" href="website-front/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/font-awesome.css">
    <link rel="stylesheet" href="website-front/css/animate.css">
    <link rel="stylesheet" href="website-front/css/style.css">
</head>
<body class="top-navigation">

<div id="wrapper">
    <div id="page-wrapper" class="gray-bg">
        <div class="row border-bottom white-bg">
            <nav class="navbar navbar-expand-lg navbar-static-top" role="navigation">

                <a href="#" class="navbar-brand">CONGITION</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar"
                        aria-expanded="false" aria-label="Toggle navigation">
                    <i class="fa fa-reorder"></i>
                </button>

                <div class="navbar-collapse collapse" id="navbar">
                    <ul class="nav navbar-nav mr-auto" id="navbar-ul">
<!--                        <li class="dropdown">-->
<!--                            <a aria-expanded="false" role="button" href="#" class="dropdown-toggle"-->
<!--                               data-toggle="dropdown"> 菜单</a>-->
<!--                            <ul role="menu" class="dropdown-menu">-->
<!--                                <li><a href="">菜单</a></li>-->
<!--                            </ul>-->
<!--                        </li>-->
                    </ul>

                    <ul class="nav navbar-top-links navbar-right">

                        <li class="dropdown" th:if="${userInfo} != null">
                            <a aria-expanded="false" role="button" href="#" class="dropdown-toggle"
                               data-toggle="dropdown" th:text="${userInfo.userName}">未登录</a>
                            <!--<ul role="menu" class="dropdown-menu">-->
                                <!--<li><a href="">修改信息</a></li>-->
                                <!--<li><a href="">安全管理</a></li>-->
                            <!--</ul>-->
                        </li>

                        <li class="layui-nav-item" style="float:right;" th:if="${userInfo} == null">
                            <a href="javascript:;" onclick="openLogin()"><i class="fa fa-sign-in"></i>登陆</a>
                        </li>
                        <li class="layui-nav-item" style="float:right;" th:if="${userInfo} != null">
                            <a href="/logout"> <i class="fa fa-sign-out"></i> 退出</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
        <div class="wrapper wrapper-content" id="main-content-frame"></div>

        <div class="footer">
            <div class="float-right">
                <strong>1.0 cognition</strong>
            </div>
            <div>
                <strong>Copyright</strong> LonelySingleByte 1.0 &copy; 2019-2019
            </div>
        </div>
    </div>
</div>
<!-- 全局js -->
<!--工具方法-->
<script type="text/javascript" src="/website-front/js/jquery-2.1.1.js"></script>
<script type="text/javascript" src="/website-front/js/popper.min.js"></script>
<script type="text/javascript" src="/website-front/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/js/plugins/metisMenu/jquery.metisMenu.js"></script>
<script type="text/javascript" src="/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
<script src="/js/plugins/bootstrap-table/bootstrap-table.min.js"></script>
<script src="/js/plugins/bootstrap-table/bootstrap-table-mobile.min.js"></script>
<script src="/js/plugins/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>
<script src="/js/plugins/pace/pace.min.js"></script>
<!--自定义方法-->
<script src="/website-front/js/inspinia.js"></script>

<script type="text/javascript" src="/js/layui.all.js"></script>

<script th:inline="javascript" type="text/javascript">
    //全局变量
    var index;
    var userinfo = [[${userInfo}]];
    var menus = [[${menus}]];

    function openLogin() {
         index = layer.open({
            type: 2,
            title: '登陆与注册',
            area: ['400px', '600px'],
            content: '/toLogin' //这里content是一个DOM，注意：最好该元素要存放在body最外层，否则可能被其它的相对元素所影响
        });
    }

    $(document).ready(function () {
        var menuStr ='';
        if (menus && menus !== '') {
            $.each(menus, function (index, el) {
                //class="dropdown-toggle"
                menuStr += '<li class="dropdown">' + '<a aria-expanded="false" role="button" href="javascript:void(0);"  data-toggle="dropdown" onclick="menuClick(\'' + el.url + '\')">' + el.name + '</a>';
                // menuStr += '<li>' + '<a href="javascript:void(0);" onclick="menuClick(' + el.url + ')">' + '<span>' + el.name + '</span></a></li>';
            });
        } else {
            //class="dropdown-toggle"
            menuStr = '<li class="dropdown">' + '<a aria-expanded="false" role="button" href="javascript:void(0);"  data-toggle="dropdown" onclick="menuClick(' + "/login" + ')">' + "用户管理" + '</a>';
        }

        $('#navbar-ul').append(menuStr);
        menuClick();
    });


    function menuClick(i) {
        console.log("1");
        if (menus && menus.length > 0) {
            $('#main-content-frame').load(i);
        } else {
            $("#main-content-frame").load('/toHome');
        }
    }


    // layui.use('element',function () {
    //     var element = layui.element;
    //
    //
    //
    // })
</script>
</body>
</html>